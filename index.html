<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Downloader - Download from YouTube, Instagram, Threads, Pinterest, Facebook</title>
    <link rel="stylesheet" href="../templates/styles.css">

    <script src = "../templates/script.js"></script>
</head>
<body>
    <div class="header">
        <h1>Download Media</h1>
         
        <h4>Download high-quality videos and audio from your favorite social platforms</h4>
    </div>

      <div class="download-container">
        <div class="input-container">
            <input 
                type="text" 
                class="url-input" 
                placeholder="üîó Paste your video URL here (YouTube, Instagram, Threads, Pinterest, Facebook)"
                id="urlInput"
                oninput="sendInput()"
            >
            <script>
        async function sendInput() {
        let value = document.getElementById('urlInput').value;
        await fetch('/store', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ urlInput: value })
        });
    }
</script>
        </div>
        <button onclick="downloadVideo()" class="download-btn" id="downloadBtn">
            <span class="btn-text">‚¨áÔ∏è Download Video</span>
            <div class="loading">
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
            </div>
        </button>
        <button onclick="downloadAudio()" class="download-btn audio-btn" id="downloadAudioBtn">
            <span class="btn-text">üéµ Download Audio</span>
            <div class="loading">
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
            </div>
        </button>
    </div>


    <p class="supported-text">Supports downloads from:</p>
    
    <div class="platform-icons">
        <div class="platform-item" data-platform="youtube">
           <img src="/icons/yt.svg" alt="youtube Icon" class="yt-icon">
            <div class="platform-name">YouTube</div>
        </div>
        <div class="platform-item" data-platform="instagram">
            <img src="/icons/insta.svg" alt="instagram Icon" class="ig-icon">
              <div class="platform-name">Instagram</div>
        </div>
        <div class="platform-item" data-platform="threads">
            <img src="/icons/threads.svg" alt="threads Icon" class="th-icon">
            <div class="platform-name">Threads</div>
        </div>
        <div class="platform-item" data-platform="pinterest">
            <img src="/icons/pinterest.svg" alt="pinterest Icon" class="pnt-icon">
            <div class="platform-name">Pinterest</div>
        </div>
       <div class="platform-item" data-platform="instagram">
            <img src="/icons/facebook.svg" alt="facebook Icon" class="fb-icon">
              <div class="platform-name">Facebook</div>
        </div>
         <div class="platform-item" data-platform="instagram">
            <img src="/icons/reddit.svg" alt="reddit Icon" class="rdt-icon">
              <div class="platform-name">Reddit</div>
        </div>
        <div class="platform-item" data-platform="twitch">
           <img src="/icons/twitch.svg" alt="twitch Icon" class="yt-icon">
            <div class="platform-name">Twitch</div>
        </div>
        <div class="platform-item" data-platform="soundcloud">
           <img src="/icons/soundcloud.svg" alt="soundcloud Icon" class="yt-icon">
            <div class="platform-name">Soundcloud</div>
        </div>
    </div>
    

</div>
    </div>

  
    <div class="features">
        <div class="feature-card">
            <div class="feature-icon">‚öôÔ∏è</div>
            <div class="feature-title">Tools used</div>
            <div class="feature-description">yt-dlp, ffmpeg, HTML5, CSS, Python, Flask, git, git LFS, Github, Vercel.</div>
        </div>

        
        <div class="feature-card">
            <div class="feature-icon">üî®</div>
            <div class="feature-title">View Source code</div>
            <div class="feature-description">The source code for this website is available at my github at : www.github.com/karansingh-in/download-media.</div>
        </div>

        <div class="feature-card">
            <div class="feature-icon">üé•</div>
            <div class="feature-title">High Quality Downloads</div>
            <div class="feature-description">Download videos in up to 4K resolution with crystal clear quality and original audio tracks.</div>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">‚ö°</div>
            <div class="feature-title">Lightning Fast</div>
            <div class="feature-description">Advanced processing algorithms ensure quick downloads without compromising quality.</div>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">üåê</div>
            <div class="feature-title">Multi-Platform Support</div>
            <div class="feature-description">Works seamlessly across YouTube, Instagram, Threads, Pinterest, and Facebook.</div>
        </div>
        
    </div>

    <footer class="footer">
        <div class="footer-text">
            Made with <span class="heart">‚ù§Ô∏è</span> by karansingh-in
        </div>
        <div class="social-links">
            <a href="https://x.com/karansingh_in" target="_blank" class="social-link twitter">
                <span class="social-icon">
                    <img src="/icons/x.svg" alt="X Icon" class="x-icon">
                </span>
                <!-- <span>X</span> -->
            </a>
            <a href="https://github.com/karansingh-in" target="_blank" class="social-link github">
                <span class="social-icon">
                    <img src="/icons/github.svg" alt="github Icon" class="github-icon">
                </span>
                <!-- <span>GitHub</span> -->
            </a>
             <a href="https://www.linkedin.com/in/karan-singh-a35a52235?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank" class="social-link linkedin">
                <span class="social-icon">
                    <img src="/icons/linkedin.svg" alt="X Icon" class="linkedin-icon">
                </span>
                <!-- <span>Linkedin</span> -->
            </a>
            <!-- <a href="https://instagram.com/karannsinggh" target="_blank" class="social-link instagram">
                <span class="social-icon">
                    <img src="/icons/insta.svg" alt="instagram Icon" class="insta-icon">
                </span>
                 <span>Instagram</span>
            </a> -->
            <a href="mailto:karannsinggh@gmail.com" class="social-link gmail">
                <span class="social-icon">
                    <img src="/icons/gmail.svg" alt="gmail Icon" class="gmail-icon">
                </span>
                <!-- <span>Gmail</span> -->
            </a>
        </div>
    </footer>

    <script>
        async function downloadVideo() {
            let url = document.getElementById('urlInput').value;
            const response = await fetch('/download_video', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url: url })
            });
            if (response.ok) {
                const blob = await response.blob();
                const urlBlob = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = urlBlob;
                a.download = ''; // Let browser use filename from response
                document.body.appendChild(a);
                a.click();
                a.remove();
                window.URL.revokeObjectURL(urlBlob);
            }
        }

        async function downloadAudio() {
            let url = document.getElementById('urlInput').value;
            const response = await fetch('/download_audio', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ url: url })
            });
            if (response.ok) {
                const blob = await response.blob();
                const urlBlob = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = urlBlob;
                a.download = '';
                document.body.appendChild(a);
                a.click();
                a.remove();
                window.URL.revokeObjectURL(urlBlob);
            }
        }
    </script>
    
</body>
</html>